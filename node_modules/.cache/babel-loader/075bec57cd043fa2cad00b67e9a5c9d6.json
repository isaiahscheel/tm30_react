{"ast":null,"code":"\"use strict\";\n\nfunction doBind(gl, elements, attributes) {\n  if (elements) {\n    elements.bind();\n  } else {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n  }\n\n  var nattribs = gl.getParameter(gl.MAX_VERTEX_ATTRIBS) | 0;\n\n  if (attributes) {\n    if (attributes.length > nattribs) {\n      throw new Error(\"gl-vao: Too many vertex attributes\");\n    }\n\n    for (var i = 0; i < attributes.length; ++i) {\n      var attrib = attributes[i];\n\n      if (attrib.buffer) {\n        var buffer = attrib.buffer;\n        var size = attrib.size || 4;\n        var type = attrib.type || gl.FLOAT;\n        var normalized = !!attrib.normalized;\n        var stride = attrib.stride || 0;\n        var offset = attrib.offset || 0;\n        buffer.bind();\n        gl.enableVertexAttribArray(i);\n        gl.vertexAttribPointer(i, size, type, normalized, stride, offset);\n      } else {\n        if (typeof attrib === \"number\") {\n          gl.vertexAttrib1f(i, attrib);\n        } else if (attrib.length === 1) {\n          gl.vertexAttrib1f(i, attrib[0]);\n        } else if (attrib.length === 2) {\n          gl.vertexAttrib2f(i, attrib[0], attrib[1]);\n        } else if (attrib.length === 3) {\n          gl.vertexAttrib3f(i, attrib[0], attrib[1], attrib[2]);\n        } else if (attrib.length === 4) {\n          gl.vertexAttrib4f(i, attrib[0], attrib[1], attrib[2], attrib[3]);\n        } else {\n          throw new Error(\"gl-vao: Invalid vertex attribute\");\n        }\n\n        gl.disableVertexAttribArray(i);\n      }\n    }\n\n    for (; i < nattribs; ++i) {\n      gl.disableVertexAttribArray(i);\n    }\n  } else {\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    for (var i = 0; i < nattribs; ++i) {\n      gl.disableVertexAttribArray(i);\n    }\n  }\n}\n\nmodule.exports = doBind;","map":null,"metadata":{},"sourceType":"script"}