{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = function orientText(trace, xaxis, yaxis, xy, dxy, refDxy) {\n  var dx = dxy[0] * trace.dpdx(xaxis);\n  var dy = dxy[1] * trace.dpdy(yaxis);\n  var flip = 1;\n  var offsetMultiplier = 1.0;\n\n  if (refDxy) {\n    var l1 = Math.sqrt(dxy[0] * dxy[0] + dxy[1] * dxy[1]);\n    var l2 = Math.sqrt(refDxy[0] * refDxy[0] + refDxy[1] * refDxy[1]);\n    var dot = (dxy[0] * refDxy[0] + dxy[1] * refDxy[1]) / l1 / l2;\n    offsetMultiplier = Math.max(0.0, dot);\n  }\n\n  var angle = Math.atan2(dy, dx) * 180 / Math.PI;\n\n  if (angle < -90) {\n    angle += 180;\n    flip = -flip;\n  } else if (angle > 90) {\n    angle -= 180;\n    flip = -flip;\n  }\n\n  return {\n    angle: angle,\n    flip: flip,\n    p: trace.c2p(xy, xaxis, yaxis),\n    offsetMultplier: offsetMultiplier\n  };\n};","map":null,"metadata":{},"sourceType":"script"}