{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar helpers = require('./helpers');\n\nvar calcHover = require('../scattergl/hover').calcHover;\n\nfunction hoverPoints(pointData, xval, yval) {\n  var cd = pointData.cd;\n  var trace = cd[0].trace;\n  var scene = pointData.scene;\n  var cdata = scene.matrixOptions.cdata;\n  var xa = pointData.xa;\n  var ya = pointData.ya;\n  var xpx = xa.c2p(xval);\n  var ypx = ya.c2p(yval);\n  var maxDistance = pointData.distance;\n  var xi = helpers.getDimIndex(trace, xa);\n  var yi = helpers.getDimIndex(trace, ya);\n  if (xi === false || yi === false) return [pointData];\n  var x = cdata[xi];\n  var y = cdata[yi];\n  var id, dxy;\n  var minDist = maxDistance;\n\n  for (var i = 0; i < x.length; i++) {\n    var ptx = x[i];\n    var pty = y[i];\n    var dx = xa.c2p(ptx) - xpx;\n    var dy = ya.c2p(pty) - ypx;\n    var dist = Math.sqrt(dx * dx + dy * dy);\n\n    if (dist < minDist) {\n      minDist = dxy = dist;\n      id = i;\n    }\n  }\n\n  pointData.index = id;\n  pointData.distance = minDist;\n  pointData.dxy = dxy;\n  if (id === undefined) return [pointData];\n  return [calcHover(pointData, x, y, trace)];\n}\n\nmodule.exports = {\n  hoverPoints: hoverPoints\n};","map":null,"metadata":{},"sourceType":"script"}