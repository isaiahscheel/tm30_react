{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar subtypes = require('../scatter/subtypes');\n\nvar BADNUM = require('../../constants/numerical').BADNUM;\n\nmodule.exports = function selectPoints(searchInfo, selectionTester) {\n  var cd = searchInfo.cd;\n  var xa = searchInfo.xaxis;\n  var ya = searchInfo.yaxis;\n  var selection = [];\n  var trace = cd[0].trace;\n  var i;\n  if (!subtypes.hasMarkers(trace)) return [];\n\n  if (selectionTester === false) {\n    for (i = 0; i < cd.length; i++) {\n      cd[i].selected = 0;\n    }\n  } else {\n    for (i = 0; i < cd.length; i++) {\n      var di = cd[i];\n      var lonlat = di.lonlat;\n\n      if (lonlat[0] !== BADNUM) {\n        var lonlat2 = [Lib.modHalf(lonlat[0], 360), lonlat[1]];\n        var xy = [xa.c2p(lonlat2), ya.c2p(lonlat2)];\n\n        if (selectionTester.contains(xy, null, i, searchInfo)) {\n          selection.push({\n            pointNumber: i,\n            lon: lonlat[0],\n            lat: lonlat[1]\n          });\n          di.selected = 1;\n        } else {\n          di.selected = 0;\n        }\n      }\n    }\n  }\n\n  return selection;\n};","map":null,"metadata":{},"sourceType":"script"}