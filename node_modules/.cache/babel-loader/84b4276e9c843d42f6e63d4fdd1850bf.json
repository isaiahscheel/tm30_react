{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar colorScaleAttrs = require('../../components/colorscale/attributes');\n\nvar hovertemplateAttrs = require('../../plots/template_attributes').hovertemplateAttrs;\n\nvar plotAttrs = require('../../plots/attributes');\n\nvar scatterMapboxAttrs = require('../scattermapbox/attributes');\n\nvar extendFlat = require('../../lib/extend').extendFlat;\n/*\n * - https://docs.mapbox.com/help/tutorials/make-a-heatmap-with-mapbox-gl-js/\n * - https://docs.mapbox.com/mapbox-gl-js/example/heatmap-layer/\n * - https://docs.mapbox.com/mapbox-gl-js/style-spec/#layers-heatmap\n * - https://blog.mapbox.com/introducing-heatmaps-in-mapbox-gl-js-71355ada9e6c\n *\n * Gotchas:\n * - https://github.com/mapbox/mapbox-gl-js/issues/6463\n * - https://github.com/mapbox/mapbox-gl-js/issues/6112\n */\n\n/*\n *\n * In mathematical terms, Mapbox GL heatmaps are a bivariate (2D) kernel density\n * estimation with a Gaussian kernel. It means that each data point has an area\n * of “influence” around it (called a kernel) where the numerical value of\n * influence (which we call density) decreases as you go further from the point.\n * If we sum density values of all points in every pixel of the screen, we get a\n * combined density value which we then map to a heatmap color.\n *\n */\n\n\nmodule.exports = extendFlat({\n  lon: scatterMapboxAttrs.lon,\n  lat: scatterMapboxAttrs.lat,\n  z: {\n    valType: 'data_array',\n    editType: 'calc',\n    description: ['Sets the points\\' weight.', 'For example, a value of 10 would be equivalent to having 10 points of weight 1', 'in the same spot'].join(' ')\n  },\n  radius: {\n    valType: 'number',\n    role: 'info',\n    editType: 'plot',\n    arrayOk: true,\n    min: 1,\n    dflt: 30,\n    description: ['Sets the radius of influence of one `lon` / `lat` point in pixels.', 'Increasing the value makes the densitymapbox trace smoother, but less detailed.'].join(' ')\n  },\n  below: {\n    valType: 'string',\n    role: 'info',\n    editType: 'plot',\n    description: ['Determines if the densitymapbox trace will be inserted', 'before the layer with the specified ID.', 'By default, densitymapbox traces are placed below the first', 'layer of type symbol', 'If set to \\'\\',', 'the layer will be inserted above every existing layer.'].join(' ')\n  },\n  text: scatterMapboxAttrs.text,\n  hovertext: scatterMapboxAttrs.hovertext,\n  hoverinfo: extendFlat({}, plotAttrs.hoverinfo, {\n    flags: ['lon', 'lat', 'z', 'text', 'name']\n  }),\n  hovertemplate: hovertemplateAttrs()\n}, colorScaleAttrs('', {\n  cLetter: 'z',\n  editTypeOverride: 'calc'\n}));","map":null,"metadata":{},"sourceType":"script"}