{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nmodule.exports = function selectPoints(searchInfo, selectionTester) {\n  var cd = searchInfo.cd;\n  var xa = searchInfo.xaxis;\n  var ya = searchInfo.yaxis;\n  var trace = cd[0].trace;\n  var isFunnel = trace.type === 'funnel';\n  var isHorizontal = trace.orientation === 'h';\n  var selection = [];\n  var i;\n\n  if (selectionTester === false) {\n    // clear selection\n    for (i = 0; i < cd.length; i++) {\n      cd[i].selected = 0;\n    }\n  } else {\n    for (i = 0; i < cd.length; i++) {\n      var di = cd[i];\n      var ct = 'ct' in di ? di.ct : getCentroid(di, xa, ya, isHorizontal, isFunnel);\n\n      if (selectionTester.contains(ct, false, i, searchInfo)) {\n        selection.push({\n          pointNumber: i,\n          x: xa.c2d(di.x),\n          y: ya.c2d(di.y)\n        });\n        di.selected = 1;\n      } else {\n        di.selected = 0;\n      }\n    }\n  }\n\n  return selection;\n};\n\nfunction getCentroid(d, xa, ya, isHorizontal, isFunnel) {\n  var x0 = xa.c2p(isHorizontal ? d.s0 : d.p0, true);\n  var x1 = xa.c2p(isHorizontal ? d.s1 : d.p1, true);\n  var y0 = ya.c2p(isHorizontal ? d.p0 : d.s0, true);\n  var y1 = ya.c2p(isHorizontal ? d.p1 : d.s1, true);\n\n  if (isFunnel) {\n    return [(x0 + x1) / 2, (y0 + y1) / 2];\n  } else {\n    if (isHorizontal) {\n      return [x1, (y0 + y1) / 2];\n    } else {\n      return [(x0 + x1) / 2, y1];\n    }\n  }\n}","map":null,"metadata":{},"sourceType":"script"}