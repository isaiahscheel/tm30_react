{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar Color = require('../../components/color');\n\nvar DESELECTDIM = require('../../constants/interactions').DESELECTDIM;\n\nfunction styleTextSelection(cd) {\n  var cd0 = cd[0];\n  var trace = cd0.trace;\n  var stash = cd0.t;\n  var scene = stash._scene;\n  var index = stash.index;\n  var els = scene.selectBatch[index];\n  var unels = scene.unselectBatch[index];\n  var baseOpts = scene.textOptions[index];\n  var selOpts = scene.textSelectedOptions[index] || {};\n  var unselOpts = scene.textUnselectedOptions[index] || {};\n  var opts = Lib.extendFlat({}, baseOpts);\n  var i, j;\n\n  if (els.length || unels.length) {\n    var stc = selOpts.color;\n    var utc = unselOpts.color;\n    var base = baseOpts.color;\n    var hasArrayBase = Array.isArray(base);\n    opts.color = new Array(trace._length);\n\n    for (i = 0; i < els.length; i++) {\n      j = els[i];\n      opts.color[j] = stc || (hasArrayBase ? base[j] : base);\n    }\n\n    for (i = 0; i < unels.length; i++) {\n      j = unels[i];\n      var basej = hasArrayBase ? base[j] : base;\n      opts.color[j] = utc ? utc : stc ? basej : Color.addOpacity(basej, DESELECTDIM);\n    }\n  }\n\n  scene.glText[index].update(opts);\n}\n\nmodule.exports = {\n  styleTextSelection: styleTextSelection\n};","map":null,"metadata":{},"sourceType":"script"}