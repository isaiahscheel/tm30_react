{"ast":null,"code":"\"use strict\";\n\nvar bindAttribs = require(\"./do-bind.js\");\n\nfunction VertexAttribute(location, dimension, a, b, c, d) {\n  this.location = location;\n  this.dimension = dimension;\n  this.a = a;\n  this.b = b;\n  this.c = c;\n  this.d = d;\n}\n\nVertexAttribute.prototype.bind = function (gl) {\n  switch (this.dimension) {\n    case 1:\n      gl.vertexAttrib1f(this.location, this.a);\n      break;\n\n    case 2:\n      gl.vertexAttrib2f(this.location, this.a, this.b);\n      break;\n\n    case 3:\n      gl.vertexAttrib3f(this.location, this.a, this.b, this.c);\n      break;\n\n    case 4:\n      gl.vertexAttrib4f(this.location, this.a, this.b, this.c, this.d);\n      break;\n  }\n};\n\nfunction VAONative(gl, ext, handle) {\n  this.gl = gl;\n  this._ext = ext;\n  this.handle = handle;\n  this._attribs = [];\n  this._useElements = false;\n  this._elementsType = gl.UNSIGNED_SHORT;\n}\n\nVAONative.prototype.bind = function () {\n  this._ext.bindVertexArrayOES(this.handle);\n\n  for (var i = 0; i < this._attribs.length; ++i) {\n    this._attribs[i].bind(this.gl);\n  }\n};\n\nVAONative.prototype.unbind = function () {\n  this._ext.bindVertexArrayOES(null);\n};\n\nVAONative.prototype.dispose = function () {\n  this._ext.deleteVertexArrayOES(this.handle);\n};\n\nVAONative.prototype.update = function (attributes, elements, elementsType) {\n  this.bind();\n  bindAttribs(this.gl, elements, attributes);\n  this.unbind();\n  this._attribs.length = 0;\n  if (attributes) for (var i = 0; i < attributes.length; ++i) {\n    var a = attributes[i];\n\n    if (typeof a === \"number\") {\n      this._attribs.push(new VertexAttribute(i, 1, a));\n    } else if (Array.isArray(a)) {\n      this._attribs.push(new VertexAttribute(i, a.length, a[0], a[1], a[2], a[3]));\n    }\n  }\n  this._useElements = !!elements;\n  this._elementsType = elementsType || this.gl.UNSIGNED_SHORT;\n};\n\nVAONative.prototype.draw = function (mode, count, offset) {\n  offset = offset || 0;\n  var gl = this.gl;\n\n  if (this._useElements) {\n    gl.drawElements(mode, count, this._elementsType, offset);\n  } else {\n    gl.drawArrays(mode, offset, count);\n  }\n};\n\nfunction createVAONative(gl, ext) {\n  return new VAONative(gl, ext, ext.createVertexArrayOES());\n}\n\nmodule.exports = createVAONative;","map":null,"metadata":{},"sourceType":"script"}