{"ast":null,"code":"'use strict'; //This code is extracted from ndarray-sort\n//It is inlined here as a temporary workaround\n\nmodule.exports = wrapper;\nvar INSERT_SORT_CUTOFF = 32;\n\nfunction wrapper(data, n0) {\n  if (n0 <= 4 * INSERT_SORT_CUTOFF) {\n    insertionSort(0, n0 - 1, data);\n  } else {\n    quickSort(0, n0 - 1, data);\n  }\n}\n\nfunction insertionSort(left, right, data) {\n  var ptr = 2 * (left + 1);\n\n  for (var i = left + 1; i <= right; ++i) {\n    var a = data[ptr++];\n    var b = data[ptr++];\n    var j = i;\n    var jptr = ptr - 2;\n\n    while (j-- > left) {\n      var x = data[jptr - 2];\n      var y = data[jptr - 1];\n\n      if (x < a) {\n        break;\n      } else if (x === a && y < b) {\n        break;\n      }\n\n      data[jptr] = x;\n      data[jptr + 1] = y;\n      jptr -= 2;\n    }\n\n    data[jptr] = a;\n    data[jptr + 1] = b;\n  }\n}\n\nfunction swap(i, j, data) {\n  i *= 2;\n  j *= 2;\n  var x = data[i];\n  var y = data[i + 1];\n  data[i] = data[j];\n  data[i + 1] = data[j + 1];\n  data[j] = x;\n  data[j + 1] = y;\n}\n\nfunction move(i, j, data) {\n  i *= 2;\n  j *= 2;\n  data[i] = data[j];\n  data[i + 1] = data[j + 1];\n}\n\nfunction rotate(i, j, k, data) {\n  i *= 2;\n  j *= 2;\n  k *= 2;\n  var x = data[i];\n  var y = data[i + 1];\n  data[i] = data[j];\n  data[i + 1] = data[j + 1];\n  data[j] = data[k];\n  data[j + 1] = data[k + 1];\n  data[k] = x;\n  data[k + 1] = y;\n}\n\nfunction shufflePivot(i, j, px, py, data) {\n  i *= 2;\n  j *= 2;\n  data[i] = data[j];\n  data[j] = px;\n  data[i + 1] = data[j + 1];\n  data[j + 1] = py;\n}\n\nfunction compare(i, j, data) {\n  i *= 2;\n  j *= 2;\n  var x = data[i],\n      y = data[j];\n\n  if (x < y) {\n    return false;\n  } else if (x === y) {\n    return data[i + 1] > data[j + 1];\n  }\n\n  return true;\n}\n\nfunction comparePivot(i, y, b, data) {\n  i *= 2;\n  var x = data[i];\n\n  if (x < y) {\n    return true;\n  } else if (x === y) {\n    return data[i + 1] < b;\n  }\n\n  return false;\n}\n\nfunction quickSort(left, right, data) {\n  var sixth = (right - left + 1) / 6 | 0,\n      index1 = left + sixth,\n      index5 = right - sixth,\n      index3 = left + right >> 1,\n      index2 = index3 - sixth,\n      index4 = index3 + sixth,\n      el1 = index1,\n      el2 = index2,\n      el3 = index3,\n      el4 = index4,\n      el5 = index5,\n      less = left + 1,\n      great = right - 1,\n      tmp = 0;\n\n  if (compare(el1, el2, data)) {\n    tmp = el1;\n    el1 = el2;\n    el2 = tmp;\n  }\n\n  if (compare(el4, el5, data)) {\n    tmp = el4;\n    el4 = el5;\n    el5 = tmp;\n  }\n\n  if (compare(el1, el3, data)) {\n    tmp = el1;\n    el1 = el3;\n    el3 = tmp;\n  }\n\n  if (compare(el2, el3, data)) {\n    tmp = el2;\n    el2 = el3;\n    el3 = tmp;\n  }\n\n  if (compare(el1, el4, data)) {\n    tmp = el1;\n    el1 = el4;\n    el4 = tmp;\n  }\n\n  if (compare(el3, el4, data)) {\n    tmp = el3;\n    el3 = el4;\n    el4 = tmp;\n  }\n\n  if (compare(el2, el5, data)) {\n    tmp = el2;\n    el2 = el5;\n    el5 = tmp;\n  }\n\n  if (compare(el2, el3, data)) {\n    tmp = el2;\n    el2 = el3;\n    el3 = tmp;\n  }\n\n  if (compare(el4, el5, data)) {\n    tmp = el4;\n    el4 = el5;\n    el5 = tmp;\n  }\n\n  var pivot1X = data[2 * el2];\n  var pivot1Y = data[2 * el2 + 1];\n  var pivot2X = data[2 * el4];\n  var pivot2Y = data[2 * el4 + 1];\n  var ptr0 = 2 * el1;\n  var ptr2 = 2 * el3;\n  var ptr4 = 2 * el5;\n  var ptr5 = 2 * index1;\n  var ptr6 = 2 * index3;\n  var ptr7 = 2 * index5;\n\n  for (var i1 = 0; i1 < 2; ++i1) {\n    var x = data[ptr0 + i1];\n    var y = data[ptr2 + i1];\n    var z = data[ptr4 + i1];\n    data[ptr5 + i1] = x;\n    data[ptr6 + i1] = y;\n    data[ptr7 + i1] = z;\n  }\n\n  move(index2, left, data);\n  move(index4, right, data);\n\n  for (var k = less; k <= great; ++k) {\n    if (comparePivot(k, pivot1X, pivot1Y, data)) {\n      if (k !== less) {\n        swap(k, less, data);\n      }\n\n      ++less;\n    } else {\n      if (!comparePivot(k, pivot2X, pivot2Y, data)) {\n        while (true) {\n          if (!comparePivot(great, pivot2X, pivot2Y, data)) {\n            if (--great < k) {\n              break;\n            }\n\n            continue;\n          } else {\n            if (comparePivot(great, pivot1X, pivot1Y, data)) {\n              rotate(k, less, great, data);\n              ++less;\n              --great;\n            } else {\n              swap(k, great, data);\n              --great;\n            }\n\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  shufflePivot(left, less - 1, pivot1X, pivot1Y, data);\n  shufflePivot(right, great + 1, pivot2X, pivot2Y, data);\n\n  if (less - 2 - left <= INSERT_SORT_CUTOFF) {\n    insertionSort(left, less - 2, data);\n  } else {\n    quickSort(left, less - 2, data);\n  }\n\n  if (right - (great + 2) <= INSERT_SORT_CUTOFF) {\n    insertionSort(great + 2, right, data);\n  } else {\n    quickSort(great + 2, right, data);\n  }\n\n  if (great - less <= INSERT_SORT_CUTOFF) {\n    insertionSort(less, great, data);\n  } else {\n    quickSort(less, great, data);\n  }\n}","map":null,"metadata":{},"sourceType":"script"}