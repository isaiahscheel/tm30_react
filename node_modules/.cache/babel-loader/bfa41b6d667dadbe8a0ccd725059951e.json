{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar attributes = require('./attributes');\n\nvar handleDomainDefaults = require('../../plots/domain').defaults;\n\nfunction defaultColumnOrder(traceOut, coerce) {\n  var specifiedColumnOrder = traceOut.columnorder || [];\n  var commonLength = traceOut.header.values.length;\n  var truncated = specifiedColumnOrder.slice(0, commonLength);\n  var sorted = truncated.slice().sort(function (a, b) {\n    return a - b;\n  });\n  var oneStepped = truncated.map(function (d) {\n    return sorted.indexOf(d);\n  });\n\n  for (var i = oneStepped.length; i < commonLength; i++) {\n    oneStepped.push(i);\n  }\n\n  coerce('columnorder', oneStepped);\n}\n\nmodule.exports = function supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  handleDomainDefaults(traceOut, layout, coerce);\n  coerce('columnwidth');\n  coerce('header.values');\n  coerce('header.format');\n  coerce('header.align');\n  coerce('header.prefix');\n  coerce('header.suffix');\n  coerce('header.height');\n  coerce('header.line.width');\n  coerce('header.line.color');\n  coerce('header.fill.color');\n  Lib.coerceFont(coerce, 'header.font', Lib.extendFlat({}, layout.font));\n  defaultColumnOrder(traceOut, coerce);\n  coerce('cells.values');\n  coerce('cells.format');\n  coerce('cells.align');\n  coerce('cells.prefix');\n  coerce('cells.suffix');\n  coerce('cells.height');\n  coerce('cells.line.width');\n  coerce('cells.line.color');\n  coerce('cells.fill.color');\n  Lib.coerceFont(coerce, 'cells.font', Lib.extendFlat({}, layout.font)); // disable 1D transforms\n\n  traceOut._length = null;\n};","map":null,"metadata":{},"sourceType":"script"}